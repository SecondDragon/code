# undo 日志

标签： MySQL 是怎样运行的

---

## 事务回滚的需求
我们说过`事务`需要保证`原子性`，也就是事务中的操作要么全部完成，要么什么也不做。但是偏偏有些时候做到一半的时候会出一些情况，比如：

- 情况一：事务执行过程中可能遇到各种错误，比如服务器本身的错误，操作系统错误，甚至是突然断电导致的错误。

- 情况二：程序员可以在事务执行过程中手动输入`ROLLBACK`语句结束当前的事务的执行。

这两种情况都会导致事务执行到一半就结束，但是事务执行过程中可能已经修改了很多东西，为了保证事务的原子性，我们需要把东西改回原先的样子，这个过程就称之为`回滚`（英文名：`rollback`），这样就可以造成一个假象：<span style="color:red">这个事务看起来什么都没做</span>，所以符合`原子性`要求。

小时候我非常痴迷于象棋，总是想找厉害的大人下棋，赢棋是不可能赢棋的，这辈子都不可能赢棋的，又不想认输，只能偷偷的悔棋才能勉强玩的下去。`悔棋`就是一种非常典型的`回滚`操作，比如棋子往前走两步，`悔棋`对应的操作就是向后走两步；比如棋子往左走一步，`悔棋`对应的操作就是向右走一步。数据库中的回滚跟`悔棋`差不多，你插入了一条记录，`回滚`操作对应的就是把这条记录删除掉；你更新了一条记录，`回滚`操作对应的就是把该记录的更新为旧值；你删除了一条记录，`回滚`操作对应的自然就是把该记录再插进去。说的貌似很简单的样子[手动偷笑😏]


## 具体介绍每一种类型的修改对应的undo日志最小信息。



## 介绍undo记录存储的位置以及具体方式
### undo表空间

innodb_undo_tablespaces

innodb_undo_directory

innodb_max_undo_log_size

innodb_undo_log_truncate

innodb_undo_logs

优惠码不好复制，给您单发一下，期盼能有回复🙏🙏

## undo日志的真实格式
